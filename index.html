<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¸­ç­è‹±æ–‡éŒ„éŸ³æŒ‘æˆ°ç‰ˆ</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root { --primary: #FF6B6B; --secondary: #4ECDC4; --bg: #F7FFF7; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--bg); margin: 0; padding: 15px; text-align: center; -webkit-tap-highlight-color: transparent; }
        .header { background: white; padding: 15px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; position: sticky; top: 0; z-index: 100; }
        .lesson-nav { display: flex; overflow-x: auto; gap: 8px; padding: 10px 0; scrollbar-width: none; }
        .lesson-nav::-webkit-scrollbar { display: none; }
        .nav-btn { background: #f0f0f0; border: none; padding: 8px 18px; border-radius: 50px; white-space: nowrap; cursor: pointer; font-weight: bold; color: #666; font-size: 14px; }
        .nav-btn.active { background: var(--secondary); color: white; box-shadow: 0 4px 8px rgba(78,205,196,0.3); }
        .sentence-card { background: white; padding: 20px; border-radius: 20px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border: 2px solid transparent; transition: 0.3s; }
        .english { font-size: 24px; color: #2D3436; font-weight: bold; display: block; margin-bottom: 8px; line-height: 1.2; }
        .chinese { font-size: 16px; color: #636E72; display: block; margin-bottom: 15px; }
        .btn-group { display: flex; justify-content: center; gap: 20px; }
        .action-btn { border: none; width: 65px; height: 65px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 28px; transition: transform 0.1s, box-shadow 0.2s; }
        .action-btn:active { transform: scale(0.9); }
        .play-btn { background: #FFE66D; box-shadow: 0 4px 0 #E6CF62; }
        .rec-btn { background: #FF6B6B; color: white; box-shadow: 0 4px 0 #E55B5B; }
        .rec-btn.recording { animation: pulse 1s infinite; background: #ff0000; box-shadow: none; transform: translateY(4px); }
        @keyframes pulse { 0% { transform: scale(1) translateY(4px); } 50% { transform: scale(1.05) translateY(4px); } 100% { transform: scale(1) translateY(4px); } }
        .tips { font-size: 12px; color: #b2bec3; margin-top: 20px; }
    </style>
</head>
<body>

<div class="header">
    <h2 style="margin:0 0 10px 0; color:var(--primary); font-size: 20px;">ğŸ¤ è‹±èªå°è€å¸«éŒ„éŸ³æŒ‘æˆ°</h2>
    <div class="lesson-nav" id="lessonNav"></div>
</div>

<div id="content"></div>
<p class="tips">æç¤ºï¼šé»æ“Š ğŸ”Š è½è€å¸«èªªï¼Œé»æ“Š ğŸ¤ é–‹å§‹éŒ„éŸ³ï¼Œå†é»ä¸€æ¬¡ â¹ï¸ è½è½è‡ªå·±èªªçš„å–”ï¼</p>

<script>
    const library = {
        "L1 é¡è‰²": [ {e:"The apple is red.", c:"è˜‹æœæ˜¯ç´…è‰²çš„"}, {e:"The banana is yellow.", c:"é¦™è•‰æ˜¯é»ƒè‰²çš„"}, {e:"The leaf is green.", c:"è‘‰å­æ˜¯ç¶ è‰²çš„"}, {e:"The sky is blue.", c:"å¤©ç©ºæ˜¯è—è‰²çš„"} ],
        "L2 äº”æ„Ÿ": [ {e:"It looks pretty.", c:"å®ƒçœ‹èµ·ä¾†å¾ˆæ¼‚äº®"}, {e:"It sounds loud.", c:"å®ƒè½èµ·ä¾†å¾ˆå¤§è²"}, {e:"It smells sweet.", c:"å®ƒèèµ·ä¾†é¦™é¦™çš„"}, {e:"It tastes yummy.", c:"å®ƒåšèµ·ä¾†å¾ˆå¥½åƒ"} ],
        "L3 å‹•ä½œ": [ {e:"I can jump.", c:"æˆ‘æœƒè·³"}, {e:"I can run.", c:"æˆ‘æœƒè·‘"}, {e:"I can swim.", c:"æˆ‘æœƒæ¸¸æ³³"}, {e:"I can dance.", c:"æˆ‘æœƒè·³èˆ"} ],
        "L4 æƒ…ç·’": [ {e:"I am happy.", c:"æˆ‘å¾ˆé–‹å¿ƒ"}, {e:"I am sad.", c:"æˆ‘å¾ˆé›£é"}, {e:"I am angry.", c:"æˆ‘å¾ˆç”Ÿæ°£"}, {e:"I am sleepy.", c:"æˆ‘å¾ˆç"} ],
        "L5 èº«é«”": [ {e:"Touch your nose.", c:"æ‘¸æ‘¸ä½ çš„é¼»å­"}, {e:"Clap your hands.", c:"æ‹æ‹ä½ çš„æ‰‹"}, {e:"Stomp your feet.", c:"è·ºè·ºä½ çš„è…³"}, {e:"Close your eyes.", c:"é–‰ä¸Šä½ çš„çœ¼ç›"} ],
        "L6 å¤©æ°£": [ {e:"It is sunny.", c:"ä»Šå¤©æ˜¯æ™´å¤©"}, {e:"It is rainy.", c:"ä¸‹é›¨äº†"}, {e:"It is windy.", c:"é¢¨å¾ˆå¤§"}, {e:"It is snowy.", c:"ä¸‹é›ªäº†"} ],
        "L7 æ•¸å­—": [ {e:"I have one nose.", c:"æˆ‘æœ‰ä¸€å€‹é¼»å­"}, {e:"I have two eyes.", c:"æˆ‘æœ‰å…©éš»çœ¼ç›"}, {e:"I have five fingers.", c:"æˆ‘æœ‰äº”éš»æ‰‹æŒ‡é ­"}, {e:"I have ten toes.", c:"æˆ‘æœ‰åå€‹è…³è¶¾é ­"} ],
        "L8 å®¶äºº": [ {e:"This is my daddy.", c:"é€™æ˜¯æˆ‘çš„çˆ¸çˆ¸"}, {e:"This is my mommy.", c:"é€™æ˜¯æˆ‘çš„åª½åª½"}, {e:"I love my brother.", c:"æˆ‘æ„›æˆ‘çš„å“¥å“¥/å¼Ÿå¼Ÿ"}, {e:"I love my sister.", c:"æˆ‘æ„›æˆ‘çš„å§Šå§Š/å¦¹å¦¹"} ],
        "L9 èˆˆè¶£": [ {e:"Sara likes to dress up.", c:"Sara å–œæ­¡æ‰“æ‰®"}, {e:"Matts likes to dance.", c:"Matts å–œæ­¡è·³èˆ"}, {e:"Joy likes to sing.", c:"Joy å–œæ­¡å”±æ­Œ"}, {e:"Paul likes to talk to animals.", c:"Paul å–œæ­¡è·Ÿå‹•ç‰©èªªè©±"} ],
        "L10 ä¸€é€±": [ {e:"On Monday, David slept in a tree.", c:"æ˜ŸæœŸä¸€ï¼Œå¤§è¡›ç¡åœ¨æ¨¹ä¸Š"}, {e:"On Tuesday, David popped a bubble gum.", c:"æ˜ŸæœŸäºŒï¼Œå¤§è¡›å¹ç ´äº†æ³¡æ³¡ç³–"}, {e:"On Wednesday, David had chocolate milk.", c:"æ˜ŸæœŸä¸‰ï¼Œå¤§è¡›å–äº†å·§å…‹åŠ›ç‰›å¥¶"}, {e:"On Friday, David felt very happy.", c:"æ˜ŸæœŸäº”ï¼Œå¤§è¡›è¦ºå¾—å¾ˆé–‹å¿ƒ"} ]
    };

    let mediaRecorder;
    let audioChunks = [];
    let currentLesson = Object.keys(library)[0];

    function init() {
        const nav = document.getElementById('lessonNav');
        Object.keys(library).forEach(lesson => {
            const btn = document.createElement('button');
            btn.className = `nav-btn ${lesson === currentLesson ? 'active' : ''}`;
            btn.innerText = lesson;
            btn.onclick = () => {
                currentLesson = lesson;
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                render();
            };
            nav.appendChild(btn);
        });
        render();
    }

    function render() {
        const container = document.getElementById('content');
        container.innerHTML = library[currentLesson].map((item, idx) => `
            <div class="sentence-card">
                <span class="english">${item.e}</span>
                <span class="chinese">${item.c}</span>
                <div class="btn-group">
                    <button class="action-btn play-btn" onclick="speak('${item.e.replace(/'/g, "\\'")}')">ğŸ”Š</button>
                    <button class="action-btn rec-btn" id="rec-${idx}" onclick="toggleRecord('${idx}')">ğŸ¤</button>
                </div>
            </div>
        `).join('');
    }

    function speak(text) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'en-US';
        msg.rate = 0.8; // ç¨å¾®æ”¾æ…¢ä¸€é»é»ï¼Œè®“ä¸­ç­å­©å­è½å¾—æ›´æ¸…æ¥š
        window.speechSynthesis.speak(msg);
    }

    async function toggleRecord(id) {
        const btn = document.getElementById(`rec-${id}`);
        
        if (!mediaRecorder || mediaRecorder.state === "inactive") {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                audioChunks = [];
                
                mediaRecorder.ondataavailable = (e) => audioChunks.push(e.data);
                mediaRecorder.onstop = () => {
                    const blob = new Blob(audioChunks, { type: 'audio/wav' });
                    const url = URL.createObjectURL(blob);
                    const audio = new Audio(url);
                    audio.play();
                };

                mediaRecorder.start();
                btn.classList.add('recording');
                btn.innerText = "â¹ï¸";
            } catch (err) {
                alert("è«‹å…è¨±éº¥å…‹é¢¨æ¬Šé™æ‰èƒ½éŒ„éŸ³å–”ï¼");
            }
        } else {
            mediaRecorder.stop();
            btn.classList.remove('recording');
            btn.innerText = "ğŸ¤";
        }
    }

    window.onload = init;
</script>
</body>
</html>
